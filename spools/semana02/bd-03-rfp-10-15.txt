RODRIGO0307-SQL> !ls

RODRIGO0307-SQL> !pwd

RODRIGO0307-SQL> create table pensionada(
  2  pensionada_id number(10,0) constraint pensionada_pk
  3  primary key,
  4  nombre varchar2(40) not null )
  5  ;

Table created.

RODRIGO0307-SQL> create table pensionada_empleado(
  2  pensionada_id number(10,0) constraint pensionada_emp_pensionada_id_fk references pensionada(pensionada_id),
  3  empleado_id number(10,0),
  4  porcentaje number(5,2),
  5  constraint pensionada_emp_empleado_id_fk
  6  foreign key(empleado_id)
  7  references empleado(empleado_id),
  8  constraint pensionada_emp_porcentaje_nn check ( porcentaje is not null ),
  9  constraint pensionada_empleado_pk primary key(pensionada_id,empleado_id));

Table created.

RODRIGO0307-SQL> create table nomina(
  2  ;

*
ERROR at line 2:
ORA-00904: : invalid identifier 


RODRIGO0307-SQL> create table quincena(
  2  quincena_id number(2,0) constraint quincena_pk primary key,
  3  clave varchar2(3) not null);

Table created.

RODRIGO0307-SQL> create table nomina(
  2  nomina_id number(10,0) constraint nomina_pk primary key,
  3  quincena_id constraint nomina_quincena_id_fk
  4  references quincena(quincena_id) );

Table created.

RODRIGO0307-SQL> insert into quincena values(1,'Q01');

1 row created.

RODRIGO0307-SQL> insert into nomina values(100,20);
insert into nomina values(100,20)
*
ERROR at line 1:
ORA-02291: integrity constraint (RODRIGO0307.NOMINA_QUINCENA_ID_FK) violated -
parent key not found 


RODRIGO0307-SQL> insert into nomina values(100,1);

1 row created.

RODRIGO0307-SQL> commit
  2  ;

Commit complete.

RODRIGO0307-SQL> delete from quincena where quincena_id=1;
delete from quincena where quincena_id=1
*
ERROR at line 1:
ORA-02292: integrity constraint (RODRIGO0307.NOMINA_QUINCENA_ID_FK) violated -
child record found 


RODRIGO0307-SQL> drop table nomina;

Table dropped.

RODRIGO0307-SQL> create table nomina(
  2  nomina_id number(10,0) constraint nomina_pk primary key,
  3  quincena_id constraint nomina_quincena_id_fk
  4  references quincena(quincena_id)
  5  on delete cascade );

Table created.

RODRIGO0307-SQL> insert into nomina values(100,1);

1 row created.

RODRIGO0307-SQL> commit
  2  ;

Commit complete.

RODRIGO0307-SQL> 
RODRIGO0307-SQL> select * from quincena;

QUINCENA_ID CLA                                                                 
----------- ---                                                                 
          1 Q01                                                                 

RODRIGO0307-SQL> insert into nomina values(100,1);
insert into nomina values(100,1)
*
ERROR at line 1:
ORA-00001: unique constraint (RODRIGO0307.NOMINA_PK) violated 


RODRIGO0307-SQL> select * from nomina;

 NOMINA_ID QUINCENA_ID                                                          
---------- -----------                                                          
       100           1                                                          

RODRIGO0307-SQL> delete from quincena where quincena_id=1;

1 row deleted.

RODRIGO0307-SQL> select * from nomina;

no rows selected

RODRIGO0307-SQL> select * from quincena;

no rows selected

RODRIGO0307-SQL> -- TAREA MORAL: probar con set null
RODRIGO0307-SQL> connect sys as sysdba
Connected.
SYS-SQL> grant create sequence to RODRIGO0307;

Grant succeeded.

SYS-SQL> connect rodrigo0307
ERROR:
ORA-01017: invalid username/password; logon denied 


Warning: You are no longer connected to ORACLE.
-SQL> connect rodrigo0307
Connected.
RODRIGO0307-SQL> create sequence my_seq
  2  start with 100
  3  increment by 10
  4  maxvalue 200
  5  minvalue 50
  6  cache 5
  7  cycle;

Sequence created.

RODRIGO0307-SQL> select my_seq.nextval from dual;

   NEXTVAL                                                                      
----------                                                                      
       100                                                                      

RODRIGO0307-SQL> select my_seq.nextval from dual;

   NEXTVAL                                                                      
----------                                                                      
       110                                                                      

RODRIGO0307-SQL> select my_seq.nextval from dual;

   NEXTVAL                                                                      
----------                                                                      
       120                                                                      

RODRIGO0307-SQL> select my_seq.nextval from dual;

   NEXTVAL                                                                      
----------                                                                      
       130                                                                      

RODRIGO0307-SQL> select my_seq.nextval from dual;

   NEXTVAL                                                                      
----------                                                                      
       140                                                                      

RODRIGO0307-SQL> select my_seq.nextval from dual;

   NEXTVAL                                                                      
----------                                                                      
       150                                                                      

RODRIGO0307-SQL> select my_seq.nextval from dual;

   NEXTVAL                                                                      
----------                                                                      
       160                                                                      

RODRIGO0307-SQL> select my_seq.nextval from dual;

   NEXTVAL                                                                      
----------                                                                      
       170                                                                      

RODRIGO0307-SQL> select my_seq.nextval from dual;

   NEXTVAL                                                                      
----------                                                                      
       180                                                                      

RODRIGO0307-SQL> select my_seq.nextval from dual;

   NEXTVAL                                                                      
----------                                                                      
       190                                                                      

RODRIGO0307-SQL> select my_seq.nextval from dual;

   NEXTVAL                                                                      
----------                                                                      
       200                                                                      

RODRIGO0307-SQL> select my_seq.nextval from dual;

   NEXTVAL                                                                      
----------                                                                      
        50                                                                      

RODRIGO0307-SQL> select my_seq.currval from dual;

   CURRVAL                                                                      
----------                                                                      
        50                                                                      

RODRIGO0307-SQL> create table my_table(
  2  id number);

Table created.

RODRIGO0307-SQL> insert into my_table values(my_seq.nextval);

1 row created.

RODRIGO0307-SQL> insert into my_table values(my_seq.nextval);

1 row created.

RODRIGO0307-SQL> insert into my_table values(my_seq.nextval);

1 row created.

RODRIGO0307-SQL> insert into my_table values(my_seq.nextval);

1 row created.

RODRIGO0307-SQL> insert into my_table values(my_seq.nextval);

1 row created.

RODRIGO0307-SQL> select * from my_table;

        ID                                                                      
----------                                                                      
        60                                                                      
        70                                                                      
        80                                                                      
        90                                                                      
       100                                                                      

RODRIGO0307-SQL> commit;

Commit complete.

RODRIGO0307-SQL> --tarea moral
RODRIGO0307-SQL> --inciso b ejercicio 1.14
RODRIGO0307-SQL> spool off
